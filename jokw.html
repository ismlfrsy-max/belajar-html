<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protected Tab</title>
    <link rel="stylesheet" href="bbbb.css">
</head>
<body>
    <div class="wrap" role="region" aria-label="Password Protected Tab">
        <h2>Masuk ke Tab</h2>
        <p class="lead">Masukkan password untuk membuka tab yang diproteksi. </p>

        <div class="field">
            <input id="pw" type="password" placeholder="Masukkan password" aria-label="password" />
            <button id="openBtn">Buka Tab</button>
            <button id="backBtn" class="secondary">Kembali</button>
        </div>

        <div id="err" class="err">Password salah — coba lagi.</div>
        <div id="ok" class="success">Password benar. Membuka tab…</div>
        <div class="note">Tip: Tekan Enter setelah memasukkan password.</div>
    </div>

    <script>
        (function(){
            const correct = 'ismail hasan';
            const pw = document.getElementById('pw');
            const btn = document.getElementById('openBtn');
            const back = document.getElementById('backBtn');
            const err = document.getElementById('err');
            const ok = document.getElementById('ok');

            function showError(msg){ err.textContent = msg || 'Password salah — coba lagi.'; err.style.display='block'; ok.style.display='none'; }
            function showOK(msg){ ok.textContent = msg || 'Password benar. Membuka tab…'; ok.style.display='block'; err.style.display='none'; }

            btn.addEventListener('click', function(){
                const v = pw.value || '';
                if(v === correct){
                    showOK('Password benar. Membuka tab...');
                    // buka index.html di tab baru
                    setTimeout(function(){ window.open('https://chatgpt.com/', '_blank'); }, 250);
                } else {
                    showError();
                    pw.value = '';
                    pw.focus();
                    setTimeout(function(){ window.open('gagal.html', '_blank'); }, 250);
                }
            });

            pw.addEventListener('keydown', function(e){ if(e.key === 'Enter') btn.click(); });

            back.addEventListener('click', function(){
                // jika ada halaman sebelumnya, kembali; jika tidak, buka index.html
                if(history.length > 1) history.back(); else location.href = 'index.html';
            });

            // fokus pada input saat halaman siap
            window.addEventListener('load', function(){ pw.focus(); });
        })();
    </script>
</body>
</html>